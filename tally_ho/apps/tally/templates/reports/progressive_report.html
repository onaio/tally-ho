{% extends region_name|yesno:'base.html,empty.html' %} 

{% load i18n staticfiles %}

{% block styles %}
{% if region_name %}
{{ block.super }}
<link rel="stylesheet" type="text/css" href="{% static "css/jquery.dataTables.min.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/responsive.dataTables.min.css" %}">
<link rel="stylesheet" type="text/css" href="{% static "css/buttons.dataTables.min.css" %}">
{% endif %}
{% endblock %}

{% block javascript %}
{% if region_name %}
{% include "data/table.html" with export_file_name='progressive_report' server_side=False %}
{% endif %}
{% endblock %}

{% block content %}

{% if region_name %}
  <h1>{% trans 'Region Name ' %}{{ region_name }}</h1>
  <br />
{% endif %}
{% if constituency_name %}
  <h1>{% trans 'Constituency Name ' %}{{ constituency_name }}</h1>
  <br />
{% endif %}

{% if administrative_area_name %}
<h3>{{ administrative_area_name }}{% trans ' Progressive Report' %}</h3>
<br />
{% endif %}

<table class="display datatable reduce-size">
  <thead>
    <tr>
      <th>{% trans 'Name' %}</th>
      <th>{% trans 'Number of Candidates' %}</th>
      <th>{% trans 'Number of Votes' %}</th>
      <th class="actions">{% trans 'Actions' %}</th>
    </tr>
  </thead>
  <tbody>
    {% for rec in progressive_report %}
      <tr>
        <td>{{ rec.name }}</td>
        <td>{{ rec.total_candidates }}</td>
        <td>{{ rec.total_votes }}</td>
        <td>
          {% if administrative_area_child_report_name and region_name %}
            <a
              href="{% url child_progressive_report_url tally_id rec.admin_area_id rec.constituency_id %}"
              class="btn btn-default btn-small vertical-margin"
              >{{ administrative_area_child_report_name }}{% trans ' Progressive Report' %}</a
            >
            <a
              href="{% url admin_area_votes_per_candidate_report_url tally_id rec.admin_area_id rec.constituency_id 'votes-per-candidate-report' %}"
              class="btn btn-default btn-small vertical-margin"
              >{% trans 'Constituency votes per candidate' %}</a
            >
          {% elif not administrative_area_child_report_name and region_name and constituency_name %}
            <a
              href="{% url admin_area_votes_per_candidate_report_url tally_id rec.admin_area_id rec.constituency_id rec.sub_constituency_id 'votes-per-candidate-report' %}"
              class="btn btn-default btn-small vertical-margin"
              >{% trans 'Sub Constituency votes per candidate' %}</a
            >
            <a
              href="{% url admin_area_votes_per_candidate_report_url tally_id rec.admin_area_id rec.constituency_id rec.sub_constituency_id 'candidate-list-sorted-by-ballots-number' %}"
              class="btn btn-default btn-small vertical-margin"
              >{% trans 'Sub Constituency candidates list by ballot order' %}</a
            >
          {% else %}
            <a
              href="{% url child_progressive_report_url tally_id rec.admin_area_id %}"
              class="btn btn-default btn-small vertical-margin"
              >{% trans 'Region Constituencies Progressive Report' %}</a
            >
            <a
              href="{% url admin_area_votes_per_candidate_report_url tally_id rec.admin_area_id 'votes-per-candidate-report' %}"
              class="btn btn-default btn-small vertical-margin"
              >{% trans 'Region votes per candidate' %}</a
            >
          {% endif %}
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

{% endblock %}
